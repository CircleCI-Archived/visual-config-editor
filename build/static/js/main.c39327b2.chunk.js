(this["webpackJsonpvisual-config-editor"]=this["webpackJsonpvisual-config-editor"]||[]).push([[0],{43:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(13),a=n.n(c),i=(n(43),n(29)),l=n(35),s=n.n(l),d=n(3),u=Object(d.d)(),b=u.useStoreActions,f=(u.useStoreDispatch,u.useStoreState),j=n(1),m=function(e){var t=e.type.components.summary,n=b((function(e){return e.inspect}));return Object(j.jsx)("button",{className:"w-full p-2 cursor-pointer text-white font-semibold bg-circle-blue rounded-md",draggable:"true",onDragStart:function(t){var n=e.type;if(null===n||void 0===n?void 0:n.dragTarget){var r,o,c=e.data;(null===(r=n.node)||void 0===r?void 0:r.transform)&&(c=n.node.transform(c)),t.dataTransfer.setData(n.dragTarget,JSON.stringify({type:(null===(o=n.node)||void 0===o?void 0:o.type)||n.type,data:c}))}},onClick:function(t){n({mode:"editing",data:e.data,dataType:e.type})},children:Object(j.jsx)(t,{data:e.data})})},p=function(e){var t=f(e.type.store.get),n=b((function(e){return e.inspect}));return Object(j.jsx)("div",{className:"mb-6",children:Object(j.jsxs)(s.a,{triggerClassName:"text-gray-100 text-2xl hover:bg-circle-gray-600 p-2 block bg-circle-gray-800 duration:50 transition-all w-full rounded-lg",triggerOpenedClassName:"block text-2xl p-2 text-gray-100 bg-circle-green w-full transition rounded-t-lg",transitionTime:50,trigger:Object(j.jsxs)("div",{className:"flex ",children:[function(){var t=e.type.components.icon;if(t){var n=t;return Object(j.jsx)(n,{className:"ml-1 mr-3 w-8 h-8"})}}(),Object(j.jsx)("p",{className:"self-center",children:e.type.name.plural})]}),children:[null===t||void 0===t?void 0:t.map((function(t){return Object(j.jsx)("div",{className:"w-full p-2 bg-circle-gray-200",children:Object(j.jsx)(m,{data:t,type:e.type})},t.name)})),Object(j.jsx)("div",{className:"w-full flex-inline h-15 p-2 rounded-b-lg bg-circle-gray-200 float-left",children:Object(j.jsx)("button",{onClick:function(){return n({dataType:e.type,mode:"creating"})},className:"pl-2 pr-2 rounded-full float-right text-white font-semibold text-xl transition-colors hover:bg-circle-blue-light bg-circle-blue",children:"+"})})]})})},x=n(5),g={type:"executor",name:{singular:"Executor",plural:"Executors"},defaults:{name:"New Executor",image:"cimg/base:latest"},transform:function(e){return new x.Executor.DockerExecutor(e.name,e.image.name||"cimg/base:latest")},store:{get:function(e){return e.definitions.executors},add:function(e){return e.defineExecutor},update:function(e){return e.updateExecutor},remove:function(e){return e.undefineExecutor}},dragTarget:"job",applyToNode:function(e,t){var n=t.job;return{job:new x.Job(n.name,e,n.steps)}},components:{icon:function(e){return Object(j.jsx)("svg",{viewBox:"0 0 96 96",className:e.className,children:Object(j.jsxs)("g",{id:"Layer_1","data-name":"Layer 1",children:[Object(j.jsx)("path",{d:"M85.93,30h-76a6,6,0,0,1-6-6V12a6,6,0,0,1,6-6h76a6,6,0,0,1,6,6V24A6,6,0,0,1,85.93,30Zm-76-20a2,2,0,0,0-2,2V24a2,2,0,0,0,2,2h76a2,2,0,0,0,2-2V12a2,2,0,0,0-2-2Z"}),Object(j.jsx)("path",{d:"M85.93,90h-76a6,6,0,0,1-6-6V72a6,6,0,0,1,6-6h76a6,6,0,0,1,6,6V84A6,6,0,0,1,85.93,90Zm-76-20a2,2,0,0,0-2,2V84a2,2,0,0,0,2,2h76a2,2,0,0,0,2-2V72a2,2,0,0,0-2-2Z"}),Object(j.jsx)("path",{d:"M85.93,60h-76a6,6,0,0,1-6-6V42a6,6,0,0,1,6-6h76a6,6,0,0,1,6,6V54A6,6,0,0,1,85.93,60Zm-76-20a2,2,0,0,0-2,2V54a2,2,0,0,0,2,2h76a2,2,0,0,0,2-2V42a2,2,0,0,0-2-2Z"}),Object(j.jsx)("circle",{cx:"19.93",cy:"18",r:"4"}),Object(j.jsx)("circle",{cx:"19.93",cy:"48",r:"4"}),Object(j.jsx)("circle",{cx:"19.93",cy:"78",r:"4"}),Object(j.jsx)("path",{d:"M77.93,20h-48a2,2,0,0,1,0-4h48a2,2,0,0,1,0,4Z"}),Object(j.jsx)("path",{d:"M77.93,50h-48a2,2,0,0,1,0-4h48a2,2,0,0,1,0,4Z"}),Object(j.jsx)("path",{d:"M77.93,80h-48a2,2,0,0,1,0-4h48a2,2,0,0,1,0,4Z"})]})})},summary:function(e){return Object(j.jsxs)("div",{children:[e.data.name," ",e.data.resourceClass]})},inspector:function(e){return function(e){var t=e.values,n=e.handleChange,r=e.handleBlur,o=e.handleSubmit;return Object(j.jsxs)("form",{onSubmit:o,children:[Object(j.jsx)("input",{name:"name",onChange:n,onBlur:r,value:t.name}),Object(j.jsx)("button",{type:"submit",className:"p-1 font-bold text-white bg-circle-blue rounded-lg",children:"Submit"})]})}}}},O=function(e){return function(t){var n,r=t.values,o=t.handleChange,c=t.handleBlur,a=t.handleSubmit;return Object(j.jsxs)("form",{onSubmit:a,children:[Object(j.jsx)("input",{name:"name",onChange:o,onBlur:c,value:r.name}),Object(j.jsx)("br",{}),Object(j.jsxs)("select",{name:"executor",value:r.executor,onChange:o,onBlur:c,children:[Object(j.jsx)("option",{value:"undefined",children:"Select Executor"},"undefined"),null===(n=e.executors)||void 0===n?void 0:n.map((function(e){return Object(j.jsx)("option",{value:JSON.stringify(e),children:e.name},e.name)}))]}),Object(j.jsx)("button",{type:"submit",className:"p-1 font-bold text-white bg-circle-blue rounded-lg",children:"Save"})]})}},h=function(e){return Object(j.jsx)("svg",{viewBox:"0 0 24 24",className:e.className,children:Object(j.jsx)("path",{d:"M12.458388,3 C17.7284428,3 22,7.25487688 22,12.5009275 C22,17.7469783 17.7286827,22 12.458388,22 C9.24779218,22 6.40748266,20.4195905 4.67890641,17.9975161 L4.51046025,18 C5.52650577,18 6.4784703,17.7267799 7.29630887,17.2500927 C8.5797622,18.6332003 10.4175246,19.5 12.4581919,19.5 C16.3422622,19.5 19.4895397,16.3667214 19.4895397,12.5010252 C19.4895397,8.63532901 16.3417423,5.5 12.4581919,5.5 C10.4182181,5.5 8.58077831,6.36686635 7.29682565,7.75083018 C6.52574446,7.30040157 5.63375878,7.03136434 4.68109466,7.00257493 C6.40892952,4.58026814 9.24869152,3 12.458388,3 Z M12.4596333,9.00000001 C14.4011972,9.00000001 15.9748954,10.5675188 15.9748954,12.5003076 C15.9748954,14.4330964 14.4012513,16 12.4596333,16 C11.2973265,16 10.266758,15.437833 9.62706371,14.5716975 C9.88962048,13.931837 10.0334728,13.2326478 10.0334728,12.5 C10.0334728,11.767055 9.88950371,11.0675956 9.62819064,10.4281361 C10.2669454,9.56228031 11.2974499,9.00000001 12.4596333,9.00000001 Z M4.50987191,10 C5.89718507,10 7.0209205,11.1200937 7.0209205,12.5002929 C7.0209205,13.8804921 5.89718507,15 4.50987191,15 C3.12373543,15 2,13.8804921 2,12.5002929 C2,11.1200937 3.12373543,10 4.50987191,10 Z"})})},v=function(e){var t;return Object(j.jsxs)("div",{children:[e.data.name," ",null===(t=e.data.executor)||void 0===t?void 0:t.name]})},w=n(6),y=n(7),C={type:"job",name:{singular:"Job",plural:"Jobs"},defaults:{name:"New Job",executor:void 0},transform:function(e){return new x.Job(e.name,JSON.parse(e.executor),e.steps)},store:{get:function(e){return e.definitions.jobs},add:function(e){return e.defineJob},update:function(e){return e.updateJob},remove:function(e){return e.undefineJob}},dragTarget:"workflow",node:{type:"job",transform:function(e){return{job:e}},store:{},component:function(e){var t,n=f((function(e){return e.workflows[e.selectedWorkflow].elements})),r=b((function(e){return e.setWorkflowElements})),o=b((function(e){return e.updateJob})),c=function(e,t){return n.map((function(n){return Object(y.g)(n)&&n.data.job.name==e.job.name?Object(w.a)(Object(w.a)({},n),{},{data:Object(w.a)(Object(w.a)({},e),t)}):n}))},a=function(t){var o,a=null===(o=n.find((function(e){return e.id===t.target})))||void 0===o?void 0:o.data;r(Object(y.e)(Object(w.a)(Object(w.a)({},t),{},{animated:!0,style:{stroke:"#fff"}}),c(a,{parameters:{requires:[e.data.job.name]}})))};return Object(j.jsxs)("div",{className:"p-3 bg-green-600 text-white font-bold rounded-lg",onDragOver:function(e){e.dataTransfer.types.includes("job")&&e.preventDefault()},onDrop:function(t){if(t.dataTransfer.types.includes("job")){var n=JSON.parse(t.dataTransfer.getData("job")),r=k(n.type);if(n&&(null===r||void 0===r?void 0:r.applyToNode)){var a=r.applyToNode(n.data,e.data);"job"in a&&o({old:e.data.job,new:a.job}),"parameters"in a&&c(e.data,a)}}},children:[Object(j.jsx)(y.c,{type:"target",isConnectable:!0,onConnect:a,position:y.d.Left,style:{borderRadius:0}}),Object(j.jsxs)("div",{className:"flex-col flex w-full",children:[(null===(t=e.data.parameters)||void 0===t?void 0:t.name)||e.data.job.name,Object(j.jsxs)("p",{className:"text-gray-200",children:["Executor: ",e.data.job.executor.name,Object(j.jsx)("br",{}),"Parameters: ",JSON.stringify(e.data.parameters)||"None"]})]}),Object(j.jsx)(y.c,{type:"source",position:y.d.Right,onConnect:a,isConnectable:!0})]})}},components:{icon:h,summary:v,inspector:O}},N=[{type:"executor",component:[x.Executor.DockerExecutor,x.Executor.MacOSExecutor,x.Executor.MachineExecutor,x.Executor.WindowsExecutor],dataType:g},{type:"job",component:[x.Job],dataType:C}],k=function(e){var t=void 0;return N.forEach((function(n){"string"!==typeof e||n.type!=e?n.component.forEach((function(r){e instanceof r&&(t=n.dataType)})):t=n.dataType})),t},E=function(){var e=b((function(e){return e.generateConfig}));return Object(j.jsxs)("div",{className:"h-full w-full pt-6 bg-circle-gray-900 flex flex-col",children:[Object(j.jsx)("div",{className:"flex border-b border-circle-gray-800",children:Object(j.jsx)("h1",{className:"border-b-4 text-xl pl-4 pr-4 pb-2 w-max font-bold text-white text-center border-circle-green",children:"CONFIG DEFINITIONS"})}),Object(j.jsx)("div",{className:"flex-1 h-full flex-col p-10 ",children:Object(j.jsx)("div",{className:"overflow-y-auto h-full mb-6 rounded-lg",children:N.map((function(e){var t=e.dataType;return Object(j.jsx)(p,{type:t})}))})}),Object(j.jsx)("button",{className:"text-gray-100 text-2xl p-2 m-6 bg-circle-green duration:50 transition-all rounded-lg",onClick:function(t){return e()},children:"Generate config.yml"})]})},T=n(15),S=n(9),J=n(21),D=n(75),W=function(e){var t=f((function(e){return e.workflows[e.selectedWorkflow].elements})),n=b((function(e){return e.addWorkflowElement}));return Object(j.jsx)("div",{className:"w-full h-full",onDragOver:function(e){e.dataTransfer.types.includes("workflow")&&e.preventDefault()},onDrop:function(e){if(e.dataTransfer.types.includes("workflow")){var t=JSON.parse(e.dataTransfer.getData("workflow"));if(console.log(t),t){var r={data:t.data,connectable:!0,type:t.type,id:Object(D.a)(),position:{x:e.clientX,y:e.clientY}};n(r)}}},children:Object(j.jsx)(y.f,{elements:t,className:e.className,selectNodesOnDrag:!1,nodeTypes:Object.assign.apply(Object,[{}].concat(Object(J.a)(N.map((function(e){var t=e.dataType.node;if(t)return Object(S.a)({},t.type,t.component)}))))),snapToGrid:!0,children:Object(j.jsx)(y.a,{variant:y.b.Lines,gap:150,color:"#000000",className:e.bgClassName,size:1})})})},M=function(){var e=f((function(e){return e.workflows})),t=b((function(e){return e.addWorkflow})),n=b((function(e){return e.selectWorkflow}));return Object(j.jsxs)(T.d,{className:"w-full h-full flex flex-col bg-white",onSelect:function(e){return n(e)},children:[Object(j.jsxs)(T.b,{className:"inline-flex pl-2 pt-2",children:[null===e||void 0===e?void 0:e.map((function(e){return Object(j.jsx)(T.a,{className:"bg-circle-gray-200 w-max rounded-t-lg p-2 mr-2 cursor-pointer",children:Object(j.jsxs)("div",{className:"flex flex-row h-5",children:[Object(j.jsx)("svg",{className:"w-8",children:Object(j.jsx)("path",{d:"M13,12.0005 L13,14.5005 C13,15.8812153 14.1192847,17.0005 15.5,17.0005 C16.7716732,17.0005 17.8215783,16.0510253 17.9794794,14.8223119 C16.8252603,14.4045443 16,13.2985065 16,12.0005 C16,10.3434832 17.3434471,9.0005 19,9.0005 C20.6565529,9.0005 22,10.3434832 22,12.0005 C22,13.3107265 21.1591278,14.4253528 19.9878345,14.8339277 C19.8172144,17.1635097 17.8731367,19.0005 15.5,19.0005 C13.0147153,19.0005 11,16.9857847 11,14.5005 L11,12.0005 L11,9.4995 C11,8.11906389 9.88099443,7.0005 8.5,7.0005 C7.2278041,7.0005 6.17794274,7.94975945 6.020417,9.17853139 C7.17480406,9.5960731 8,10.7018409 8,12.0005 C8,13.6567847 6.65628475,15.0005 5,15.0005 C3.34371525,15.0005 2,13.6567847 2,12.0005 C2,10.6896797 2.84072326,9.57538027 4.01209968,9.16698275 C4.18228055,6.83714058 6.12646259,5.0005 8.5,5.0005 C10.9853872,5.0005 13,7.0143176 13,9.4995 L13,12.0005 Z M6,12.0005 C6,11.4482074 5.55213797,11.0005 5,11.0005 C4.44786203,11.0005 4,11.4482074 4,12.0005 C4,12.5522153 4.44828475,13.0005 5,13.0005 C5.55171525,13.0005 6,12.5522153 6,12.0005 Z M20,12.0005 C20,11.4482074 19.552138,11.0005 19,11.0005 C18.447862,11.0005 18,11.4482074 18,12.0005 C18,12.5522153 18.4482847,13.0005 19,13.0005 C19.5517153,13.0005 20,12.5522153 20,12.0005 Z"})}),Object(j.jsx)("p",{className:"text-lg",children:e.name})]})},e.id)})),Object(j.jsx)("button",{className:"bg-circle-blue transition-colors hover:bg-circle-blue-light text-white w-10 text-2xl rounded-t-lg p-1 mr-2 cursor-pointer",onClick:function(e){return t("new-workflow")},children:"+"})]}),null===e||void 0===e?void 0:e.map((function(e){return Object(j.jsx)(T.c,{selectedClassName:"flex-grow mr-4",children:Object(j.jsx)(W,{workflow:e,bgClassName:"bg-circle-gray-800",className:"ml-2 border-2 border-b-0 border-circle-gray-400"})},e.id)}))]})},Z={inspect:Object(d.b)((function(e,t){e.inspecting=Object(w.a)({mode:"none",data:void 0,dataType:void 0},t)})),addWorkflow:Object(d.b)((function(e,t){e.workflows=e.workflows.concat({name:t,id:Object(D.a)(),elements:[]})})),selectWorkflow:Object(d.b)((function(e,t){e.selectedWorkflow=t})),removeWorkflow:Object(d.b)((function(e,t){e.workflows=e.workflows.filter((function(e){return e.id!==t.id}))})),addWorkflowElement:Object(d.b)((function(e,t){e.workflows[e.selectedWorkflow].elements.push(t)})),removeWorkflowElement:Object(d.b)((function(e,t){})),setWorkflowElements:Object(d.b)((function(e,t){e.workflows[e.selectedWorkflow].elements=t})),importOrb:Object(d.b)((function(e,t){})),unimportOrb:Object(d.b)((function(e,t){})),defineJob:Object(d.b)((function(e,t){var n;null===(n=e.definitions.jobs)||void 0===n||n.push(t)})),updateJob:Object(d.b)((function(e,t){if(e.definitions.jobs){var n=e.definitions.jobs.findIndex((function(e){return e.name===t.old.name})),r=e.workflows[e.selectedWorkflow];r.elements=r.elements.map((function(e){return Object(y.g)(e)&&"job"===e.type&&e.data.job.name===t.old.name?Object(w.a)(Object(w.a)({},e),{},{data:Object(w.a)(Object(w.a)({},e.data),{},{job:t.new})}):e})),console.log(t),e.definitions.jobs[n]=t.new}})),undefineJob:Object(d.b)((function(e,t){var n;e.definitions.jobs=null===(n=e.definitions.jobs)||void 0===n?void 0:n.filter((function(e){return e.name===t.name}))})),defineCommand:Object(d.b)((function(e,t){})),undefineCommand:Object(d.b)((function(e,t){})),defineExecutor:Object(d.b)((function(e,t){var n;e.definitions.executors=null===(n=e.definitions.executors)||void 0===n?void 0:n.concat(t)})),updateExecutor:Object(d.b)((function(e,t){e.definitions.executors})),undefineExecutor:Object(d.b)((function(e,t){var n;null===(n=e.definitions.jobs)||void 0===n||n.filter((function(e){return e.name!==t.name}))})),defineParameter:Object(d.b)((function(e,t){})),undefineParameter:Object(d.b)((function(e,t){})),error:Object(d.b)((function(e,t){console.error("An action was not found! ",t)})),generateConfig:Object(d.b)((function(e){console.log(e);var t=new x.Config(!1,e.definitions.jobs,e.definitions.workflows,e.definitions.executors);console.log(t)}))},V=new x.Executor.DockerExecutor("default","cimg/base:stable"),z=Object(w.a)({inspecting:{mode:"none"},selectedWorkflow:0,config:void 0,definitions:{version:2.1,commands:[],executors:[V],jobs:[new x.Job("build",V),new x.Job("test",V),new x.Job("deploy",V)],workflows:[],orbs:[],parameters:[]},workflows:[{name:"build-and-test",elements:[],id:Object(D.a)()}]},Z),L=n(20),B=function(){var e,t=f((function(e){return e.inspecting})),n=b((function(e){return e.inspect})),r=t.dataType,o=b((function(e){return(null===r||void 0===r?void 0:r.store.add(e))||e.error})),c=f((function(e){return e.definitions}));return Object(j.jsx)("div",{className:"creating"!=(null===t||void 0===t?void 0:t.mode)?"hidden":"absolute w-full h-full flex items-center justify-center bg-opacity-75 bg-black z-50 transition-all",children:Object(j.jsxs)("div",{className:"bg-circle-gray-100 rounded-lg w-max ",children:[Object(j.jsxs)("div",{className:"w-full h-14 bg-circle-green rounded-t-lg float-left p-2 mb-2",children:[Object(j.jsxs)("h1",{className:"float-left ml-2 mt-1 text-white font-semibold text-2xl mr-4",children:["Create New ",null===t||void 0===t||null===(e=t.dataType)||void 0===e?void 0:e.name.singular]}),Object(j.jsx)("button",{onClick:function(){return n({mode:"none"})},className:"pl-2 mt-1 pr-2 rounded-full float-right text-none text-2xl transition-colors hover:bg-circle-red",children:"X"})]}),Object(j.jsx)("div",{className:"p-3",children:function(){if(r)return Object(j.jsx)(L.a,{initialValues:r.defaults,onSubmit:function(e){o(r.transform(e)),n({mode:"none",data:void 0,dataType:void 0})},children:r.components.inspector(c)})}()})]})})},I=function(){var e=f((function(e){return e.inspecting})),t=(b((function(e){return e.inspect})),e.dataType),n=b((function(e){return(null===t||void 0===t?void 0:t.store.update(e))||e.error})),r=f((function(e){return e.definitions}));return e&&e.dataType&&"editing"==e.mode?Object(j.jsx)("div",{className:"p-5",children:function(){if(t){var o={};return Object.assign.apply(Object,[o].concat(Object(J.a)(Object.keys(e.data).map((function(t){var n=e.data[t];return Object(S.a)({},t,"object"==typeof n?JSON.stringify(n):n)}))))),Object(j.jsx)(L.a,{initialValues:o,onSubmit:function(r){n({old:e.data,new:t.transform(r)})},children:t.components.inspector(r)})}}()}):Object(j.jsx)("p",{className:"text-circle-green-light font-semibold p-5",children:"Select a defintion or node to view and edit properties"})},A=function(){return Object(j.jsxs)(d.a,{store:Object(d.c)(z),children:[Object(j.jsx)(B,{}),Object(j.jsxs)(i.a,{split:"vertical",defaultSize:"75%",className:"bounds bg-circle-gray-700",resizerClassName:"z-0 w-0.5 h-full transition duration-500  hover:bg-circle-blue-light cursor-ew-resize",children:[Object(j.jsxs)(i.a,{split:"horizontal",defaultSize:"70%",minSize:"20%",resizerClassName:"h-0.5  flex-col cursor-ns-resize transition duration-500 hover:bg-circle-blue-light",children:[Object(j.jsx)(M,{}),Object(j.jsxs)("div",{className:"bg-circle-gray-900 w-full h-full border-r-2 border-circle-green-light",children:[Object(j.jsxs)("div",{className:"inline-flex border-b text-xl  pt-4 pb-0 border-circle-gray-800 w-full font-bold",children:[Object(j.jsx)("div",{className:"border-b-4 pl-4 pr-4 pb-2 w-max text-white border-circle-green",children:"INSPECTOR"}),Object(j.jsx)("div",{className:"pl-4 pr-4 pb-2 w-max text-circle-gray-500 hover:text-white transition-colors cursor-pointer",children:"CODE EDITOR"})]}),Object(j.jsx)(I,{})]})]}),Object(j.jsx)(E,{})]})]})};a.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.c39327b2.chunk.js.map